(function (e) {
    var i = 10;
    var d = (e.GLOBALCONFIG.AppWebSocketSVR) ? (e.GLOBALCONFIG.AppWebSocketSVR) : "http://127.0.0.1:9093";
    var c = d + "/PageDefaultChannel";
    var a = d + "/AppDefaultChannel";
    var f = d + "/SysDefaultChannel";
    var j = "PageDefaultEvent";
    var b = null;
    var h = null;
    var g = null;
    var k = function (l) {
        if (l && l.userid) {
            this.userid = l.userid
        }
        if (io) {
            this.pageSocket = io.connect(c)
        } else {
            alert("请引入SocketIO")
        }
        var m = {};
        if (this.userid) {
            m._MsgSender = this.userid
        } else {
            if (UserSession && UserSession.getCurrentUserId()) {
                m._MsgSender = UserSession.getCurrentUserId()
            } else {
                if (UserSession && UserSession.getUserid()) {
                    m._MsgSender = UserSession.getUserid()
                }
            }
        }
        this.pageSocket.emit("login", m);
        this.userid = m._MsgSender
    };
    k.prototype.pageSend = function (l, m) {
        var n = {};
        n._MsgTypeEvent = l;
        n._MsgSender = this.userid;
        n._Data = JSON.stringify(m);
        console.log(n);
        this.pageSocket.emit(j, n)
    };
    k.prototype.pageReceive = function (l, m) {
        this.pageSocket.on(j, function (o) {
            if (e.isFunction(m) && l == o._MsgTypeEvent) {
                var n = o._Data;
                m(JSON.parse(n))
            }
        })
    };
    k.prototype.appSend = function (l, m) {
    };
    k.prototype.appReceive = function (l, m) {
    };
    k.prototype.sysSend = function (l, m) {
    };
    k.prototype.sysReceive = function (l, m) {
    };
    e.Message = function (l) {
        return new k(l)
    }
})(jQuery);