$.extend({GLOBALCONFIG:{dateformat:"yyyy-MM-dd HH:mi:ss",ctxpath:"",basePath:"http://127.0.0.1:8080/les-sysm/",fileServerBasePath:"",uploadFileAction:"",downloadFileAction:"",outputImgAction:"",defaultImg:"",errorImg:"",uploadBizFile:"",gotoURLAction:"",gridDefaultType:"opensql"},globalConfig:function(e){var g,h,f;if(!$.isPlainObject(e)){if(typeof e=="string"){return $.GLOBALCONFIG[e]}return}h=$.GLOBALCONFIG;f=$.Lang;$.each(h,function(b,a){if(e.hasOwnProperty(b)){g=e[b];h[b]=g}})},getGuid:function(){var b=false;$.ajax({url:"sqlmap/getuuid",type:"POST",data:{},dataType:"json",async:false,success:function(a){if(a.uuid){b=a.uuid}else{alert("生成guid异常!");throw new Error()}},error:function(){alert("生成guid异常!");throw new Error("生成guid异常!")}});return b},getViewportSize:function(c){var d;if(!$.isWindow(c)){return{w:0,h:0}}d=c.document;if(d.compatMode==="CSS1Compat"){return{w:d.documentElement.clientWidth,h:d.documentElement.clientHeight}}return{w:d.body.clientWidth,h:d.body.clientHeight}},getScrollOffsets:function(c){var d;if(!$.isWindow(c)){return{x:0,y:0}}if("pageXOffset" in c){return{x:c.pageXOffset,y:c.pageYOffset}}d=c.document;if(d.compatMode==="CSS1Compat"){return{x:d.documentElement.scrollLeft,y:d.documentElement.scrollTop}}return{x:d.body.scrollLeft,y:d.body.scrollTop}}});(function(g,h){function f(a){e(a.self,h.GLOBALCONFIG.ctxpath+"/"+h.GLOBALCONFIG.errorImg)}function e(b,a){b.onerror=null;b.src=a}g.imgErrorHandler=f})(window,jQuery);(function(j,h){if(h.browser.msie){function f(){return false}j.onhelp=f;function i(){if((j.event.altKey)&&((j.event.keyCode==37)||(j.event.keyCode==39))){alert("不准使用ALT+方向键前进或后退网页！");event.returnValue=false}if(event.keyCode==166||event.keyCode==167){event.keyCode=0;event.returnValue=false}if(event.keyCode==8){if(event.srcElement.type!="text"&&event.srcElement.type!="textarea"&&event.srcElement.type!="password"){event.keyCode=0;event.returnValue=false}else{if(h(event.srcElement).attr("readonly")){event.keyCode=0;event.returnValue=false}}}if((event.ctrlKey&&event.keyCode==82)){event.keyCode=0;event.returnValue=false}if((event.ctrlKey)&&(event.keyCode==78)){event.returnValue=false}if(j.event.srcElement.tagName=="A"&&(j.event.shiftKey||j.event.ctrlKey)){j.event.returnValue=false}if((j.event.altKey)&&(j.event.keyCode==115)){j.showModelessDialog("about:blank","","dialogWidth:1px;dialogheight:1px");return false}if(j.event.keyCode>=112&&j.event.keyCode<=123){j.event.keyCode=0;j.event.returnValue=false}}function g(){if(j.event.shiftKey){j.event.returnValue=false}}document.onkeydown=i;document.onclick=g}})(window,jQuery);function traversalObject(d){for(var c in d){if(typeof(d[c])=="object"){if(d[c] instanceof Date){d[c]=mini.formatDate(d[c],"yyyy-MM-dd HH:mm:ss")}else{traversalObject(d[c])}}}}$.extend({callJson:function(c){this.ops=$.extend({dataType:"json",type:"post",url:"",async:true,data:{}},c);var d=this.ops.data;if((typeof d=="object")&&(typeof traversalObject=="function")){traversalObject(d)}$.ajax({dataType:this.ops.dataType,type:this.ops.type,url:this.ops.url,data:d,async:this.ops.async,beforeSend:function(a){if(c.showWaiting){mini.mask({el:document.body,cls:"mini-mask-loading",html:"加载中..."})}},complete:function(a,b){if(c.showWaiting){mini.unmask(document.body)}},error:function(a,e,b){if(c.showError==undefined||c.showError){var h="";if(c.name){h="["+c.name+"]"}mini.alert("调用Ajax服务"+h+"出错!\n可能原因:\n	■与服务器的网络中断\n	■找不到请求的页面["+this.url+"]");if(c.fail){c.fail(e,true)}else{if(typeof c.error=="function"){c.error(e,true)}}}},success:function(b){if(b){if(b.errorCode){var a="未知业务异常["+b.errorCode+"]";if(b.errorMsg){a=b.errorMsg}if(c.showError==undefined||c.showError==true){mini.alert(a)}if(c.fail){c.fail(b,false)}else{if(typeof c.error=="function"){c.error(b,false)}}return}}if(typeof c.ok=="function"){c.ok(b)}else{if(typeof c.success=="function"){c.success(b,false)}}}})},callAjax:function(b){if(!$.isPlainObject(b.data)){b.data={}}if(b.url){if(b.url.indexOf("jspaction/")>=0){b.data={jspactionreqjson:JSON.stringify(b.data||{})}}else{if(b.url.indexOf("workflow/")>=0){b.data={workflowreqjson:JSON.stringify(b.data||{})}}}}$.ajax($.extend({dataType:"JSON",type:"post",beforeSend:function(a){if(b.showWaiting){if(top.$showwaiting){top.$showwaiting()}else{if($.ShowWaiting){$.ShowWaiting()}}}},complete:function(d,a){if(b.showWaiting){if(top.$hidewaiting){top.$hidewaiting()}else{if($.HideWaiting){$.HideWaiting()}}}},error:function(e,h,g){var a="";if(b.name){a="["+b.name+"]"}alert("调用Ajax服务"+a+"出错!\n可能原因:\n	■与服务器的网络中断\n	■找不到请求的页面["+this.url+"]");if(b.fail){b.fail(h,true)}else{if(typeof b.err=="function"){b.err(h,true)}}},success:function(a){if(a){if(a.errorCode){var d="未知业务异常["+a.errorCode+"]";if(a.errorMsg){d=a.errorMsg}alert(d);if(b.fail){b.fail(a,false)}else{if(typeof b.err=="function"){b.err(a,false)}}return}}if(typeof b.ok=="function"){b.ok(a)}}},b))},callFile:function(v,p){var o=[];var i=$("#lesfiledownform");if(i.length<1){$("body").append('<iframe style="display:none" id="lesfiledownf" name="lesfiledownf"></iframe><form id="lesfiledownform" style="display:none;" action="" method="post" target="lesfiledownf"></form>');i=$("#lesfiledownform");p=arguments[0];v=false}if(arguments.length==1&&$.isPlainObject(arguments[0])){p=arguments[0];v=false}if(v===undefined||!v){if($.GLOBALCONFIG.downloadFileAction){v=$.GLOBALCONFIG.downloadFileAction}else{v="file/filedownload"}}if(p){if(v.indexOf("jspaction/")>=0){p={jspactionreqjson:JSON.stringify(p||{})}}for(var u in p){var m=p[u];if(typeof m=="string"){o.push('<input type="hidden" name="'+u+'" value=""/>')}}}var n=v.indexOf("?");if(n>1){var s=v.substring(n+1);var r=s.split("&");for(var q=0;q<r.length;q++){var t=r[q].split("=");if(t.length>1){o.push('<input type="hidden" name="'+t[0]+'" value=""/>');p[t[0]]=t[1]}}v=v.substring(0,n)}i.attr("action",v).empty().append(o.join(""));i.find(":input").each(function(a){var b=$(this);b.val(p[b.attr("name")])});i.submit();return true},callDoc:function(h){if(h&&h.url){var e=h.url;var g=h.data||{};var f=h.templateUrl||"";g._resultFilename=h.fileName||"未命名.doc";if(e.indexOf("?")>0){e+="&_resultTempfile="+f}else{e+="?_resultTempfile="+f}$.callFile(e,g)}else{throw new Error("callDoc参数错误")}},callXls:function(h){if(h&&h.url){var e=h.url;var g=h.data||{};var f=h.templateUrl||"";g._resultFilename=h.fileName||"未命名.xls";if(e.indexOf("?")>0){e+="&_resultTempfile="+f}else{e+="?_resultTempfile="+f}$.callFile(e,g)}else{throw new Error("callXls参数错误")}},ajaxFileUpload:function(A){var B=new Date().getTime();var w="fuiframe"+B;var r="fuform"+B;var u=0;var t=[];t.push('<iframe id="'+w+'" name="'+w+'" style="position:absolute;top:-999px;left:-999px;width:10px;height:10px;"');if(window.ActiveXObject){t.push(' src="javascript:false;"')}t.push("></iframe>");t.push('<form style="position:absolute;top:-999px;left:-999px;width:10px;height:10px;" action="" method="POST" name="'+r+'" id="'+r+'" enctype="multipart/form-data">');if(A.data){for(var z in A.data){var s=A.data[z];if(s&&(typeof s=="string"||typeof s=="number")){t.push('<input type="hidden" name="'+z+'" value="" />');u++}}}t.push("</form>");$("body").append(t.join(""));var n=$("#"+r);if(u>0){n.find(":input").each(function(b){var a=$(this);a.val(""+A.data[a.attr("name")])})}var p=$("#"+A.fileElementId);var q=p.clone(true);p.attr("id","fufile"+B);p.before(q);n.append(p);if($.isFunction(A.beforeSend)){A.beforeSend()}var y=false;var v=false;var x=function(e){var a="上传文件失败:";y=true;if(e=="timeout"){if($.isFunction(A.complete)){A.complete()}a+="请求超时["+A.timeout+"]";if($.isFunction(A.error)){A.error(a)}else{alert(a);throw new Error(a)}return false}var d=document.getElementById(w);try{var b=d.contentWindow||d.contentDocument;if(b&&$.isFunction(b._uploadComplete)){v=b._uploadComplete()}}catch(c){v=false;a+="未知异常("+c+")"}if(v&&v.error){a=v.errorMsg;v=false}if(!v){if($.isFunction(A.complete)){A.complete()}if($.isFunction(A.error)){A.error(a)}else{alert(a);throw new Error(a)}return false}if($.isFunction(A.success)){A.success(v)}$(d).unbind();setTimeout(function(){$("#"+w).remove();$("#"+r).remove()},100);if($.isFunction(A.complete)){A.complete()}};if(A.timeout>0){setTimeout(function(){if(!y){x("timeout")}},A.timeout*1000)}n.attr("action",A.url).attr("target",w);$("#"+w).load(x);n.submit()}});(function(){var h;var i=function(){};var f=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"];var j=f.length;var g=(window.console=window.console||{});while(j--){h=f[j];if(!g[h]){g[h]=i}}}());(function(e){var h=10;var g="http://127.0.0.1:10288/";function f(b){var a="";if(e.GLOBALCONFIG.basePath){a=(e.GLOBALCONFIG.basePath.charAt((e.GLOBALCONFIG.basePath.length-1)=="/"))?(e.GLOBALCONFIG.basePath+"jslib/bce"):(e.GLOBALCONFIG.basePath+"/jslib/bce")}e(document.body).append('<iframe frameboder="0" width="466px" height="360px" style="position:absolute;z-index:99999;right:16px;top:16px;border:1px solid #009;" src="'+a+'/setupExtension.html"></iframe>');alert("调用服务"+b+"异常\r\n未正常安装本地扩展组件，请在页面右侧区域下载安装!")}e.callExtension=function(a,b,d){var j,c;if(typeof a=="string"){a={name:a}}if(a.success){b=a.success}if(a.error){d=a.error}c={url:g+a.name,dataType:"jsonp",jsonp:"$cb",jsonpCallback:"$bcecb",success:function(i){if(i.error){if(d){d(i)}else{alert(i.errorMsg)}return}if(b){b(i)}},error:function(){if(d){d({error:-99,errorMsg:"error"})}else{f(a.name)}}};if(a.charset){c.scriptCharset=a.charset}e.ajax({url:g+"ver",dataType:"jsonp",jsonp:"$cb",jsonpCallback:"$bcecb",success:function(i){if(i.ver==undefined||i.ver<h){f(a.name);return}e.ajax(c)},error:function(){f(a.name)}});j=e(document.head||e("head")[0]||document.documentElement).find("script").get(0);j.onerror=function(i){f(a.name)}};e.installPath=function(a){if(a){this.path=a+"/setupExtension.html"}else{this.path="setupExtension.html"}}})(jQuery);(function(a,c){var b=function(d){this.screenInfo={}};b.prototype={openScreen:function(d,f){var e=this;if(!d){return}c.callExtension("dp3",function(j){if(!(j&&j.count>0)){return}e.screenInfo=j;var h=j.count;var g=j.screens;function i(l){return function(o,m){var p=o[l];var n=m[l];return p-n}}g.sort(i("left"));var k="";c.each(g,function(l,n){var q=n.left;var p=n.top;var o=n.right;var m=n.bottom;if(p<0){alert("请将屏幕扩展改为横向扩展");return}c.each(d,function(r,s){var t=s.order||s.orderno;var v=s.screen;if((l+1)==t){if(v&&v=="1"){k=s.url||s.fullurl}else{var u="height="+m+"px,width="+o+"px,top="+p+"px,left="+q+"px,right="+o+"px,bottom="+m+"px";a.open((s.url||s.fullurl),(s.title),u)}return false}})});if(typeof f=="function"){return f(true)}if(k!=""){a.location.href=k}})}};c.Screen=function(){var d=new b();return d}})(window,jQuery);